# Art Design Pro è¯­éŸ³æƒé™è„šæœ¬ç®¡ç†

## ğŸŒ å›½é™…åŒ–

é¡¹ç›®ä½¿ç”¨ **vue-i18n** æ’ä»¶ï¼Œç›®å‰é›†æˆäº†ä¸­æ–‡å’Œè‹±æ–‡ä¸¤ç§è¯­è¨€åŒ…ã€‚

ç›®å‰å¯¹èœå•ã€é¡¶æ ã€è®¾ç½®ä¸­å¿ƒç­‰ç»„ä»¶è¿›è¡Œäº†å›½é™…åŒ–ï¼Œå…¶ä»–åœ°æ–¹æ ¹æ®éœ€æ±‚è‡ªè¡Œé…ç½®ã€‚

### æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ locales
â”‚   â”œâ”€â”€ index.ts      // é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ langs         // è¯­è¨€åŒ…ç›®å½•
â”‚       â”œâ”€â”€ zh.json   // ä¸­æ–‡åŒ…
â”‚       â””â”€â”€ en.json   // è‹±æ–‡åŒ…
```

### åœ¨æ¨¡ç‰ˆä¸­ä½¿ç”¨

```vue
<template>
  <p>{{ $t('setting.color.title') }}</p>
</template>
```

### å¦‚ä½•è·å–å½“å‰è¯­è¨€

```typescript
import { useI18n } from "vue-i18n";
const { locale } = useI18n();
```

### å¦‚ä½•é…ç½®å¤šè¯­è¨€

ä¿®æ”¹ `src/locales/index.ts` åœ¨ `messages` ä¸­å¢åŠ ä½ è¦é…ç½®çš„è¯­è¨€ï¼Œç„¶ååœ¨ `langs` ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ `en.ts`

```typescript
import { createI18n } from "vue-i18n";
import en from "./en";
import zh from "./zh";
import { LanguageEnum } from "@/enums/appEnum";

const lang = createI18n({
  locale: LanguageEnum.ZH, // è®¾ç½®è¯­è¨€ç±»å‹
  legacy: false, // å¦‚æœè¦æ”¯æŒcompositionAPIï¼Œæ­¤é¡¹å¿…é¡»è®¾ç½®ä¸ºfalse;
  globalInjection: true, // å…¨å±€æ³¨å†Œ$tæ–¹æ³•
  fallbackLocale: LanguageEnum.ZH, // è®¾ç½®å¤‡ç”¨è¯­è¨€
  messages: {
    en,
    zh,
  },
});

export default lang;
```

## ğŸ” æƒé™è¯´æ˜

æœ¬ç³»ç»Ÿæ”¯æŒä¸¤ç§æƒé™æ§åˆ¶æ¨¡å¼ï¼ŒåŸºäºç”¨æˆ·è§’è‰²æˆ–èœå•åˆ—è¡¨åŠ¨æ€ç®¡ç†é¡µé¢è®¿é—®å’ŒæŒ‰é’®æ˜¾ç¤ºæƒé™ã€‚

### æƒé™æ§åˆ¶æ¨¡å¼

#### æ¦‚è¿°

ç³»ç»Ÿæä¾›ä»¥ä¸‹ä¸¤ç§æƒé™æ§åˆ¶æ¨¡å¼ï¼š

- **åŸºäºè§’è‰²ï¼š** é€šè¿‡æ¥å£è·å–ç”¨æˆ·è§’è‰²ï¼Œæ§åˆ¶é¡µé¢è®¿é—®å’ŒæŒ‰é’®æ˜¾ç¤ºæƒé™
- **åŸºäºèœå•ï¼š** é€šè¿‡æ¥å£è·å–èœå•åˆ—è¡¨ï¼Œä¾æ®èœå•ç»“æ„æ§åˆ¶é¡µé¢è®¿é—®å’ŒæŒ‰é’®æƒé™

#### é…ç½®æ–¹å¼

æƒé™æ§åˆ¶æ¨¡å¼é€šè¿‡æ ¹ç›®å½•ä¸‹çš„ `.env` æ–‡ä»¶é…ç½®ã€‚ä¿®æ”¹ `VITE_ACCESS_MODE` çš„å€¼å¯åˆ‡æ¢æ¨¡å¼ï¼š

- `frontend`ï¼šå‰ç«¯æ§åˆ¶æ¨¡å¼ï¼ŒåŸºäºåç«¯è¿”å›çš„è§’è‰²æ ‡è¯†è¿›è¡Œæƒé™æ§åˆ¶
- `backend`ï¼šåç«¯æ§åˆ¶æ¨¡å¼ï¼ŒåŸºäºåç«¯è¿”å›çš„èœå•åˆ—è¡¨è¿›è¡Œæƒé™æ§åˆ¶

```bash
# æƒé™æ§åˆ¶æ¨¡å¼ï¼ˆfrontend | backendï¼‰
VITE_ACCESS_MODE=frontend
```

### å‰ç«¯æ§åˆ¶æ¨¡å¼

#### åŸç†

å‰ç«¯ç»´æŠ¤èœå•åˆ—è¡¨ã€‚ç”¨æˆ·ç™»å½•åï¼Œæ¥å£è¿”å›è§’è‰²æ ‡è¯†ï¼ˆå¦‚ `R_SUPER`ï¼‰ã€‚å‰ç«¯æ ¹æ®è§’è‰²éå†èœå•åˆ—è¡¨ï¼Œè‹¥èœå•çš„ `roles` å­—æ®µåŒ…å«è¯¥è§’è‰²ï¼Œåˆ™å…è®¸è®¿é—®å¯¹åº”è·¯ç”±ã€‚è‹¥æœªè®¾ç½® `roles`ï¼Œåˆ™é»˜è®¤æ‰€æœ‰ç”¨æˆ·å¯è®¿é—®ã€‚

#### é…ç½®ç¤ºä¾‹

èœå•é…ç½®æ–‡ä»¶ä½äºï¼š`/src/router/routes/asyncRoutes.ts`

```typescript
[
  {
    id: 4,
    path: "/system",
    name: "System",
    component: RoutesAlias.Layout,
    meta: {
      title: "menus.system.title",
      icon: "",
      keepAlive: false,
    },
    children: [
      // ä»… R_SUPER å’Œ R_ADMIN è§’è‰²å¯è®¿é—®
      {
        id: 41,
        path: "user",
        name: "User",
        component: RoutesAlias.User,
        meta: {
          title: "menus.system.user",
          keepAlive: true,
          roles: ["R_SUPER", "R_ADMIN"],
        },
      },
      // æœªè®¾ç½® rolesï¼Œæ‰€æœ‰ç”¨æˆ·å¯è®¿é—®
      {
        id: 42,
        path: "role",
        name: "Role",
        component: RoutesAlias.Role,
        meta: {
          title: "menus.system.role",
          keepAlive: true,
        },
      },
    ],
  },
];
```

#### æ³¨æ„äº‹é¡¹

ç¡®ä¿æ¥å£è¿”å›çš„è§’è‰²æ ‡è¯†ä¸è·¯ç”±è¡¨çš„ `roles` å­—æ®µåŒ¹é…ï¼Œå¦åˆ™ç”¨æˆ·æ— æ³•è®¿é—®å—é™é¡µé¢ã€‚

### åç«¯æ§åˆ¶æ¨¡å¼

#### åŸç†

åç«¯ç”Ÿæˆèœå•åˆ—è¡¨ã€‚ç”¨æˆ·ç™»å½•åï¼Œæ¥å£è¿”å›èœå•æ•°æ®ï¼Œå‰ç«¯æ ¡éªŒååŠ¨æ€æ³¨å†Œè·¯ç”±ï¼Œå®ç°æƒé™æ§åˆ¶ã€‚

#### æ•°æ®ç»“æ„

èœå•æ•°æ®ç»“æ„å®šä¹‰ä½äºï¼š`/src/router/routes/asyncRoutes.ts`

```typescript
[
  {
    id: 4,
    path: "/system",
    name: "System",
    component: RoutesAlias.Layout,
    meta: {
      title: "menus.system.title",
      icon: "",
      keepAlive: false,
    },
    children: [
      {
        id: 41,
        path: "user",
        name: "User",
        component: RoutesAlias.User,
        meta: {
          title: "menus.system.user",
          keepAlive: true,
        },
      },
      {
        id: 42,
        path: "role",
        name: "Role",
        component: RoutesAlias.Role,
        meta: {
          title: "menus.system.role",
          keepAlive: true,
        },
      },
    ],
  },
];
```

#### æ³¨æ„äº‹é¡¹

åç«¯è¿”å›çš„èœå•æ•°æ®ç»“æ„å¿…é¡»ä¸å‰ç«¯å®šä¹‰ä¸€è‡´ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´è·¯ç”±æ³¨å†Œå¤±è´¥ã€‚

### å‰åç«¯æ§åˆ¶æ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | ä¼˜åŠ¿ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **å‰ç«¯æ§åˆ¶æ¨¡å¼** | é€‚ç”¨äºè§’è‰²å›ºå®šçš„ç³»ç»Ÿ<br/>å®ç°ç®€å•ï¼Œé€‚åˆå°å‹é¡¹ç›® | è§’è‰²æƒé™ç›¸å¯¹å›ºå®šçš„ç³»ç»Ÿ |
| **åç«¯æ§åˆ¶æ¨¡å¼** | é€‚ç”¨äºæƒé™å¤æ‚çš„ç³»ç»Ÿ<br/>æ›´çµæ´»ï¼ŒåŠ¨æ€æƒé™æ§åˆ¶ | éœ€è¦å¤æ‚æƒé™ç®¡ç†çš„å¤§å‹ç³»ç»Ÿ |

> âš ï¸ **æ³¨æ„ï¼š** 
> - å‰ç«¯æ§åˆ¶æ¨¡å¼ï¼šåç«¯è§’è‰²å˜æ›´éœ€åŒæ­¥æ›´æ–°å‰ç«¯è·¯ç”±é…ç½®
> - åç«¯æ§åˆ¶æ¨¡å¼ï¼šéœ€ç¡®ä¿å‰åç«¯æ•°æ®ç»“æ„ä¸€è‡´

### æŒ‰é’®æƒé™æ§åˆ¶

æŒ‰é’®æƒé™æ§åˆ¶æ”¯æŒç²¾ç»†åŒ–ç®¡ç†ï¼Œé€šè¿‡ç”¨æˆ·è§’è‰²æˆ–æ¥å£è¿”å›çš„æƒé™ç åŠ¨æ€æ§åˆ¶æŒ‰é’®æ˜¾ç¤ºã€‚

#### æƒé™ç 

æƒé™ç é€‚ç”¨äºå‰ç«¯å’Œåç«¯æ§åˆ¶æ¨¡å¼ï¼š

- **å‰ç«¯æ§åˆ¶æ¨¡å¼ï¼š** ç™»å½•æ¥å£éœ€è¿”å›æƒé™ç åˆ—è¡¨
- **åç«¯æ§åˆ¶æ¨¡å¼ï¼š** èœå•åˆ—è¡¨éœ€åŒ…å« `authList` å­—æ®µï¼Œå®šä¹‰æŒ‰é’®æƒé™

#### é…ç½®ç¤ºä¾‹ï¼ˆåç«¯æ§åˆ¶æ¨¡å¼ï¼‰

```typescript
[
  {
    id: 44,
    path: "menu",
    name: "Menus",
    component: RoutesAlias.Menu,
    meta: {
      title: "menus.system.menu",
      keepAlive: true,
      authList: [
        { id: 441, title: "æ–°å¢", authMark: "add" },
        { id: 442, title: "ç¼–è¾‘", authMark: "edit" },
      ],
    },
  },
];
```

#### ä½¿ç”¨æ–¹å¼

é€šè¿‡ç³»ç»Ÿæä¾›çš„ `hasAuth` æ–¹æ³•æ§åˆ¶æŒ‰é’®æ˜¾ç¤ºï¼š

```typescript
import { useAuth } from "@/composables/useAuth";
const { hasAuth } = useAuth();
```

```vue
<template>
  <ElButton v-if="hasAuth('add')">æ·»åŠ </ElButton>
</template>
```

### è‡ªå®šä¹‰æŒ‡ä»¤æƒé™æ§åˆ¶

#### v-auth æŒ‡ä»¤

åœ¨åç«¯æ§åˆ¶æ¨¡å¼ä¸‹ï¼Œå¯é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤ `v-auth` åŸºäº `authList` çš„ `authMark` æ§åˆ¶æŒ‰é’®æ˜¾ç¤ºã€‚

**é…ç½®ç¤ºä¾‹ï¼š**

```typescript
[
  {
    id: 44,
    path: "menu",
    name: "Menus",
    component: RoutesAlias.Menu,
    meta: {
      title: "menus.system.menu",
      keepAlive: true,
      authList: [
        { id: 441, title: "æ–°å¢", authMark: "add" },
        { id: 442, title: "ç¼–è¾‘", authMark: "edit" },
        { id: 443, title: "åˆ é™¤", authMark: "delete" },
      ],
    },
  },
];
```

**ä½¿ç”¨æ–¹å¼ï¼š**

```vue
<template>
  <ElButton v-auth="'add'">æ·»åŠ </ElButton>
</template>
```

#### v-roles æŒ‡ä»¤

å¯åŸºäºç”¨æˆ·ä¿¡æ¯æ¥å£ä¸­è¿”å›çš„ `roles` è¿›è¡Œæƒé™æ§åˆ¶ã€‚

**ç”¨æˆ·æ¥å£è¿”å›ç¤ºä¾‹ï¼š**

```json
{
    "userId": "1",
    "userName": "Super",
    "roles": [
        "R_SUPER"
    ],
    "buttons": [
        "B_CODE1",
        "B_CODE2",
        "B_CODE3"
    ]
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```vue
<template>
  <el-button v-roles="['R_SUPER', 'R_ADMIN']">æŒ‰é’®</el-button>
  <el-button v-roles="'R_ADMIN'">æŒ‰é’®</el-button>
</template>
```

### æƒé™æ§åˆ¶æ³¨æ„äº‹é¡¹

1. **æ•°æ®ä¸€è‡´æ€§ï¼š** ç¡®ä¿ç™»å½•æ¥å£è¿”å›çš„è§’è‰²æˆ–æƒé™ç ä¸è·¯ç”±è¡¨é…ç½®ä¸€è‡´
2. **æ•°æ®ç»“æ„ï¼š** åç«¯æ§åˆ¶æ¨¡å¼ä¸‹ï¼Œèœå•æ•°æ®éœ€ä¸¥æ ¼éµå¾ªå‰ç«¯å®šä¹‰çš„ç»“æ„
3. **æµ‹è¯•éªŒè¯ï¼š** æµ‹è¯•æƒé™æ§åˆ¶æ—¶ï¼ŒéªŒè¯ä¸åŒè§’è‰²ç”¨æˆ·çš„é¡µé¢å’ŒæŒ‰é’®æ˜¾ç¤ºæ˜¯å¦ç¬¦åˆé¢„æœŸ

## âš™ï¸ è„šæœ¬è¯´æ˜

### å¯ç”¨è„šæœ¬å‘½ä»¤

| è„šæœ¬åç§° | å‘½ä»¤ | æè¿° |
|----------|------|------|
| `dev` | `vite --open` | å¯åŠ¨å¼€å‘æœåŠ¡å™¨å¹¶åœ¨é»˜è®¤æµè§ˆå™¨ä¸­è‡ªåŠ¨æ‰“å¼€åº”ç”¨ |
| `build` | `vue-tsc --noEmit && vite build` | å…ˆè¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥ï¼Œç„¶åæ„å»ºåº”ç”¨ |
| `serve` | `vite preview` | é¢„è§ˆæ„å»ºåçš„åº”ç”¨ï¼Œæ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒ |
| `lint` | `eslint` | è¿è¡Œ ESLint æ£€æŸ¥ä»£ç è´¨é‡å’Œä»£ç é£æ ¼é—®é¢˜ |
| `fix` | `eslint --fix` | è¿è¡Œ ESLint å¹¶è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜ |
| `lint:prettier` | `prettier --write "**/*.{js,cjs,ts,json,tsx,css,less,scss,vue,html,md}"` | ä½¿ç”¨ Prettier æ ¼å¼åŒ–æ‰€æœ‰æŒ‡å®šç±»å‹çš„æ–‡ä»¶ |
| `lint:stylelint` | `stylelint "**/*.{css,scss,vue}" --fix` | ä½¿ç”¨ Stylelint æ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤æ ·å¼é—®é¢˜ |
| `lint:lint-staged` | `lint-staged` | è¿è¡Œ lint-staged ä»…æ£€æŸ¥æš‚å­˜çš„æ–‡ä»¶ |
| `prepare` | `husky` | è®¾ç½® Husky Git é’©å­ |
| `commit` | `git-cz` | ä½¿ç”¨ Commitizen è§„èŒƒåŒ–æäº¤æ¶ˆæ¯ |

### è¯¦ç»†è¯´æ˜

#### ğŸš€ å¼€å‘ç›¸å…³

**dev**
```bash
npm run dev
# æˆ–
pnpm dev
```
- **å‘½ä»¤:** `vite --open`
- **æè¿°:** å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨ï¼Œå¹¶åœ¨é»˜è®¤æµè§ˆå™¨ä¸­è‡ªåŠ¨æ‰“å¼€åº”ç”¨ï¼Œä¾¿äºå¼€å‘å’Œè°ƒè¯•

**build**
```bash
npm run build
# æˆ–
pnpm build
```
- **å‘½ä»¤:** `vue-tsc --noEmit && vite build`
- **æè¿°:** é¦–å…ˆè¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥ï¼ˆä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶ï¼‰ï¼Œç¡®ä¿ä»£ç ç±»å‹å®‰å…¨ã€‚ç„¶åä½¿ç”¨ Vite æ„å»ºç”Ÿäº§ç‰ˆæœ¬çš„åº”ç”¨

**serve**
```bash
npm run serve
# æˆ–
pnpm serve
```
- **å‘½ä»¤:** `vite preview`
- **æè¿°:** é¢„è§ˆæ„å»ºåçš„åº”ç”¨ï¼Œæ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒï¼Œä¾¿äºåœ¨æœ¬åœ°æŸ¥çœ‹æ„å»ºç»“æœ

#### ğŸ” ä»£ç è´¨é‡æ£€æŸ¥

**lint**
```bash
npm run lint
# æˆ–
pnpm lint
```
- **å‘½ä»¤:** `eslint`
- **æè¿°:** è¿è¡Œ ESLint å·¥å…·ï¼Œæ£€æŸ¥ä»£ç ä¸­çš„æ½œåœ¨é”™è¯¯å’Œä¸ç¬¦åˆä»£ç è§„èŒƒçš„é—®é¢˜

**fix**
```bash
npm run fix
# æˆ–
pnpm fix
```
- **å‘½ä»¤:** `eslint --fix`
- **æè¿°:** è¿è¡Œ ESLint å¹¶è‡ªåŠ¨ä¿®å¤ä»£ç ä¸­å¯ä¿®å¤çš„é—®é¢˜ï¼Œå¦‚æ ¼å¼é—®é¢˜å’Œç®€å•çš„é”™è¯¯

#### ğŸ¨ ä»£ç æ ¼å¼åŒ–

**lint:prettier**
```bash
npm run lint:prettier
# æˆ–
pnpm lint:prettier
```
- **å‘½ä»¤:** `prettier --write "**/*.{js,cjs,ts,json,tsx,css,less,scss,vue,html,md}"`
- **æè¿°:** ä½¿ç”¨ Prettier å·¥å…·æ ¼å¼åŒ–é¡¹ç›®ä¸­æ‰€æœ‰æŒ‡å®šç±»å‹çš„æ–‡ä»¶ï¼Œç¡®ä¿ä»£ç é£æ ¼ä¸€è‡´

**lint:stylelint**
```bash
npm run lint:stylelint
# æˆ–
pnpm lint:stylelint
```
- **å‘½ä»¤:** `stylelint "**/*.{css,scss,vue}" --fix`
- **æè¿°:** ä½¿ç”¨ Stylelint å·¥å…·æ£€æŸ¥å¹¶è‡ªåŠ¨ä¿®å¤ CSSã€SCSS å’Œ Vue æ–‡ä»¶ä¸­çš„æ ·å¼é—®é¢˜

#### ğŸ“‹ Git ç›¸å…³

**lint:lint-staged**
```bash
npm run lint:lint-staged
# æˆ–
pnpm lint:lint-staged
```
- **å‘½ä»¤:** `lint-staged`
- **æè¿°:** è¿è¡Œ lint-staged å·¥å…·ï¼Œä»…æ£€æŸ¥å’Œæ ¼å¼åŒ–æš‚å­˜çš„æ–‡ä»¶ï¼Œç¡®ä¿æäº¤å‰ä»£ç è´¨é‡

**prepare**
```bash
npm run prepare
# æˆ–
pnpm prepare
```
- **å‘½ä»¤:** `husky`
- **æè¿°:** è®¾ç½® Husky Git é’©å­ï¼Œç”¨äºåœ¨ Git æ“ä½œï¼ˆå¦‚æäº¤ã€æ¨é€ï¼‰å‰è¿è¡Œé¢„å®šä¹‰çš„è„šæœ¬ï¼Œç¡®ä¿ä»£ç è´¨é‡

**commit**
```bash
npm run commit
# æˆ–
pnpm commit
```
- **å‘½ä»¤:** `git-cz`
- **æè¿°:** ä½¿ç”¨ Commitizen å·¥å…·è§„èŒƒåŒ–æäº¤æ¶ˆæ¯ï¼Œç¡®ä¿æäº¤ä¿¡æ¯æ ¼å¼ä¸€è‡´ï¼Œä¾¿äºé¡¹ç›®ç»´æŠ¤å’Œç‰ˆæœ¬ç®¡ç†

### å¼€å‘å·¥ä½œæµå»ºè®®

1. **å¼€å‘é˜¶æ®µï¼š** ä½¿ç”¨ `pnpm dev` å¯åŠ¨å¼€å‘æœåŠ¡å™¨
2. **ä»£ç æäº¤å‰ï¼š** è¿è¡Œ `pnpm lint` å’Œ `pnpm fix` æ£€æŸ¥å’Œä¿®å¤ä»£ç é—®é¢˜
3. **æ ¼å¼åŒ–ä»£ç ï¼š** ä½¿ç”¨ `pnpm lint:prettier` ç»Ÿä¸€ä»£ç æ ¼å¼
4. **æ ·å¼æ£€æŸ¥ï¼š** ä½¿ç”¨ `pnpm lint:stylelint` æ£€æŸ¥æ ·å¼ä»£ç 
5. **è§„èŒƒæäº¤ï¼š** ä½¿ç”¨ `pnpm commit` è¿›è¡Œè§„èŒƒåŒ–çš„ Git æäº¤
6. **æ„å»ºæµ‹è¯•ï¼š** ä½¿ç”¨ `pnpm build` æ„å»ºç”Ÿäº§ç‰ˆæœ¬
7. **é¢„è§ˆéªŒè¯ï¼š** ä½¿ç”¨ `pnpm serve` é¢„è§ˆæ„å»ºç»“æœ
