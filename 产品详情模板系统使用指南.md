# 产品详情模板系统使用指南

## 🎯 快速开始

### 1. 启动系统

```powershell
# 启动后端服务
cd backend
npm run dev

# 启动后台管理系统
cd admin
npm run dev

# 启动前端网站
cd "web Site/web PC"
python -m http.server 8080
```

访问地址:
- 后台管理: http://localhost:3006
- 前端网站: http://localhost:8080
- 后端API: http://localhost:3001

---

## 📝 创建产品完整流程

### 步骤1: 制作产品卡片

1. 登录后台管理系统
2. 进入 **产品管理 → 产品列表**
3. 点击 **新增产品** 按钮
4. 填写产品基本信息:

| 字段 | 说明 | 示例 |
|------|------|------|
| 产品名称 | 必填 | 星火Pro 智能燃气灶 |
| 产品型号 | **自动生成** | RD-001 (系统自动) |
| 产品价格 | 必填 | 2499.00 |
| 卡片主图 | 必填,300x300px | 上传产品图片 |
| 产品标签 | 可选 | 热销/新品/特价/推荐 |
| 产品特性 | 可选 | 蓝焰技术、多重安全、节能环保 |
| 销售数量 | 可选 | 1580 |

5. 实时预览产品卡片效果
6. 点击 **下一步**

### 步骤2: 上传详情页文件

#### 准备文件夹

创建产品详情页文件夹,结构如下:

```
产品详情模板/
├── 产品详情.html          # 必须: 根目录唯一HTML文件
├── 图片/                  # 必须: 图片子目录
│   ├── 产品图1.jpg
│   ├── 产品图2.jpg
│   └── ...
└── 样式逻辑/              # 必须: 样式和脚本子目录
    ├── 产品详情.css       # 必须: 唯一CSS文件
    ├── 产品详情.js        # 必须: 唯一JS文件
    ├── 批量添加可编辑标记.js  # 可选
    └── 自动可编辑.js      # 可选
```

#### 上传文件夹

1. 拖拽整个文件夹到上传区域
2. 或点击 **从文件夹选择** 按钮
3. 系统自动校验文件夹结构:
   - ✅ 根目录 HTML 文件 (1个)
   - ✅ 样式逻辑/ 内 CSS (1个)
   - ✅ 样式逻辑/ 内 JS (1个)
   - ✅ 图片/ 子文件夹
4. 校验通过后点击 **下一步**

> **注意**: 文件夹名称可以任意,系统会自动重命名为产品ID (如 RD-001)

### 步骤3: 配置产品信息

1. **选择产品分类**
   - 支持多级分类
   - 可选择父分类或子分类

2. **选择推广位置**
   - `首页Banner位` - 显示在首页轮播图区域
   - `分类页置顶` - 显示在分类页顶部
   - `首页推荐` - 显示在首页核心产品区域
   - `不参与推广` - 仅在产品列表显示

3. **选择产品状态**
   - `草稿` - 暂不发布,仅后台可见
   - `立即发布` - 立即在前端显示

4. **设置排序权重**
   - 系统自动填充(分类内最大值+1)
   - 可手动调整
   - 数字越大排序越靠前

5. 点击 **创建产品**

---

## 🎉 创建完成

系统会自动执行以下操作:

1. ✅ **生成产品ID**: `RD-001`
2. ✅ **保存产品信息**: 数据库记录已创建
3. ✅ **上传文件夹**: 文件夹已重命名为 `RD-001`
4. ✅ **更新文件路径**: `products/RD-001`
5. ✅ **前端同步**: 产品已显示在对应位置

---

## 🌐 前端展示位置

### 1. 产品列表页

**访问**: http://localhost:8080/products.html

**显示内容**:
- 所有已发布的产品
- 支持分类筛选
- 支持搜索功能
- 点击卡片跳转到详情页

### 2. 产品详情页

**访问**: http://localhost:8080/products/RD-001/产品详情.html

**显示内容**:
- 完整的产品详情
- 产品图片、规格参数
- 产品特性介绍
- 购买按钮

### 3. 首页推荐区域

**访问**: http://localhost:8080/index.html

**位置**: 核心产品系列

**显示内容**:
- 推广位置为 `homepage_recommend` 的产品
- 大图展示
- 产品特性列表

### 4. 分类展示区域

**访问**: http://localhost:8080/index.html

**位置**: 产品分类

**显示内容**:
- 所有产品分类
- 每个分类的产品数量
- 点击查看该分类的所有产品

---

## 🔄 修改产品

### 修改产品信息

1. 在产品列表中找到要修改的产品
2. 点击 **编辑** 按钮
3. 修改任意信息(产品ID不可修改)
4. 点击 **保存**

### 修改产品分类

1. 编辑产品
2. 在第三步修改分类
3. 保存后自动同步到前端
4. 产品会显示在新分类下

### 更新详情页文件

1. 编辑产品
2. 进入第二步
3. 重新上传文件夹
4. 旧文件会被自动替换

---

## 🗑️ 删除产品

1. 在产品列表中选择要删除的产品
2. 点击 **删除** 按钮
3. 确认删除
4. 系统会自动:
   - 删除数据库记录
   - 删除产品文件夹 (`public/products/RD-001`)
   - 前端自动移除该产品

---

## 📂 文件结构说明

### 后端文件结构

```
backend/
└── public/
    └── products/           # 产品详情页文件夹
        ├── RD-001/         # 产品ID作为文件夹名
        │   ├── 产品详情.html
        │   ├── 图片/
        │   │   ├── 图1.jpg
        │   │   └── 图2.jpg
        │   └── 样式逻辑/
        │       ├── 产品详情.css
        │       └── 产品详情.js
        ├── RD-002/
        └── RD-003/
```

### 前端访问路径

```
http://localhost:8080/products/RD-001/产品详情.html
                      ^^^^^^^^  ^^^^^^
                      产品ID    HTML文件名
```

---

## 🎨 自定义产品详情页

### 使用可编辑功能

产品详情页支持可视化编辑功能:

1. 在详情页中添加可编辑标记:
   ```html
   <h1 data-editable="title">产品标题</h1>
   <p data-editable="desc">产品描述</p>
   ```

2. 使用批量添加工具:
   - 在浏览器控制台运行 `批量添加可编辑标记.js`
   - 自动为所有文字元素添加可编辑标记

3. 使用自动扫描工具:
   - 在浏览器控制台运行 `自动可编辑.js`
   - 深度扫描所有元素,自动添加可编辑标记

### 修改样式

1. 编辑 `样式逻辑/产品详情.css`
2. 修改颜色、字体、布局等
3. 重新上传文件夹

### 修改交互

1. 编辑 `样式逻辑/产品详情.js`
2. 添加自定义交互逻辑
3. 重新上传文件夹

---

## 🔍 常见问题

### Q1: 产品ID可以自定义吗?

**A**: 不可以。产品ID由系统自动生成,格式为 `RD-001`, `RD-002`...,确保唯一性。

### Q2: 文件夹上传失败怎么办?

**A**: 检查文件夹结构是否符合要求:
- 根目录必须有且仅有1个HTML文件
- 必须有 `图片/` 子目录
- 必须有 `样式逻辑/` 子目录
- `样式逻辑/` 下必须有且仅有1个CSS和1个JS文件

### Q3: 产品不显示在前端怎么办?

**A**: 检查以下几点:
1. 产品状态是否为 `立即发布`
2. 浏览器是否已刷新
3. 检查浏览器控制台是否有错误
4. 检查后端服务是否正常运行

### Q4: 如何修改产品在首页的显示位置?

**A**: 
1. 编辑产品
2. 在第三步修改 `推广位置`
3. 保存后自动同步到前端

### Q5: 删除产品后文件夹还在吗?

**A**: 不在。删除产品时,系统会自动删除对应的文件夹 (`public/products/RD-001`)。

---

## 🚀 高级功能

### 批量导入产品

暂不支持,请逐个创建产品。

### 产品复制

1. 在产品列表中找到要复制的产品
2. 点击 **复制** 按钮(如果有)
3. 修改产品名称和其他信息
4. 保存

### 产品导出

1. 在产品列表中选择要导出的产品
2. 点击 **导出** 按钮
3. 选择导出格式(Excel/CSV)
4. 下载文件

---

## 📞 技术支持

### 查看日志

- **后端日志**: `backend/logs/app.log`
- **前端控制台**: 浏览器开发者工具 (F12)

### API文档

访问: http://localhost:3001/api-docs

### 联系方式

如有问题,请查看:
- 实现方案文档: `产品详情模板系统实现方案.md`
- 项目状态总览: `项目状态总览-2025-11-21.md`

---

## ✅ 检查清单

创建产品前请确认:

- [ ] 后端服务已启动 (http://localhost:3001)
- [ ] 后台管理系统已启动 (http://localhost:3006)
- [ ] 前端网站已启动 (http://localhost:8080)
- [ ] 数据库连接正常
- [ ] 产品详情页文件夹结构正确
- [ ] 图片文件大小合理 (<5MB)

创建产品后请验证:

- [ ] 产品ID已自动生成 (RD-001)
- [ ] 产品在后台列表中显示
- [ ] 产品在前端对应位置显示
- [ ] 产品详情页可以正常访问
- [ ] 产品图片正常加载
- [ ] 产品分类正确

---

**文档版本**: v1.0  
**最后更新**: 2025-11-28  
**作者**: Cascade AI

**祝您使用愉快!** 🎉
