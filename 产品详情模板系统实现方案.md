# äº§å“è¯¦æƒ…æ¨¡æ¿ç³»ç»Ÿå®ç°æ–¹æ¡ˆ

## ğŸ“‹ éœ€æ±‚æ¦‚è¿°

å®ç°ä¸€ä¸ªå®Œæ•´çš„äº§å“è¯¦æƒ…æ¨¡æ¿ç³»ç»Ÿ,æ”¯æŒ:

1. **ä¸‰æ­¥å‘å¯¼å¼åˆ›å»ºäº§å“** - å·²å®ç°åŸºç¡€åŠŸèƒ½
2. **äº§å“IDè‡ªåŠ¨ç”Ÿæˆ** - æ ¼å¼: `RD-{åºå·}` (å¦‚ RD-001, RD-002)
3. **æ¨¡æ¿æ–‡ä»¶å¤¹ä¸Šä¼ ä¸ç»‘å®š** - ä¸Šä¼ æ–‡ä»¶å¤¹åè‡ªåŠ¨é‡å‘½åä¸ºäº§å“ID
4. **å¤šç«¯åŒæ­¥å±•ç¤º** - åå°ç®¡ç†ã€å‰ç«¯äº§å“åˆ—è¡¨ã€åˆ†ç±»é¡µã€é¦–é¡µæ¨èç­‰
5. **åŠ¨æ€åˆ†ç±»ç®¡ç†** - å¯è°ƒèŠ‚äº§å“åˆ†ç±»å¹¶å®æ—¶åŒæ­¥

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•°æ®æµå‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åå°ç®¡ç†ç³»ç»Ÿ (Admin)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ­¥éª¤1:       â”‚  â”‚ æ­¥éª¤2:       â”‚  â”‚ æ­¥éª¤3:       â”‚  â”‚
â”‚  â”‚ åˆ¶ä½œäº§å“å¡ç‰‡  â”‚â†’â”‚ ä¸Šä¼ æ¨¡æ¿æ–‡ä»¶  â”‚â†’â”‚ é…ç½®äº§å“ä¿¡æ¯  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“ APIè°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯æœåŠ¡ (Backend)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. ç”Ÿæˆäº§å“ID (RD-001)                            â”‚   â”‚
â”‚  â”‚ 2. åˆ›å»ºäº§å“è®°å½• (æ•°æ®åº“)                          â”‚   â”‚
â”‚  â”‚ 3. ä¸Šä¼ å¹¶é‡å‘½åæ–‡ä»¶å¤¹ (public/products/RD-001)    â”‚   â”‚
â”‚  â”‚ 4. æ›´æ–°äº§å“filePathå­—æ®µ                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“ æ•°æ®åŒæ­¥
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å‰ç«¯å±•ç¤º (Web Site)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ äº§å“åˆ—è¡¨é¡µ    â”‚  â”‚ åˆ†ç±»å±•ç¤ºé¡µ    â”‚  â”‚ é¦–é¡µæ¨èä½    â”‚  â”‚
â”‚  â”‚ (Grid View)  â”‚  â”‚ (Categories) â”‚  â”‚ (Core Prods) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â†“                â†“                â†“            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚      äº§å“è¯¦æƒ…é¡µ (products/RD-001/äº§å“è¯¦æƒ….html)  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 1. äº§å“IDç”Ÿæˆè§„åˆ™

#### åç«¯å®ç° (productService.js)

```javascript
/**
 * ç”Ÿæˆäº§å“ID
 * æ ¼å¼: RD-{åºå·} (å¦‚ RD-001, RD-002)
 */
async function generateProductId() {
  const Product = require('../models/product');
  
  // æŸ¥æ‰¾æœ€å¤§çš„äº§å“IDåºå·
  const lastProduct = await Product.findOne({
    where: {
      model: {
        [Op.like]: 'RD-%'
      }
    },
    order: [['model', 'DESC']],
    attributes: ['model']
  });
  
  let nextNumber = 1;
  if (lastProduct && lastProduct.model) {
    // æå–åºå·éƒ¨åˆ† (RD-001 -> 001)
    const match = lastProduct.model.match(/RD-(\d+)/);
    if (match) {
      nextNumber = parseInt(match[1]) + 1;
    }
  }
  
  // æ ¼å¼åŒ–ä¸º3ä½æ•°å­— (1 -> 001)
  const productId = `RD-${String(nextNumber).padStart(3, '0')}`;
  return productId;
}

/**
 * åˆ›å»ºäº§å“ - è‡ªåŠ¨ç”ŸæˆID
 */
async function createProduct(productData) {
  // å¦‚æœæ²¡æœ‰æä¾›model,è‡ªåŠ¨ç”Ÿæˆ
  if (!productData.model) {
    productData.model = await generateProductId();
  }
  
  const product = await Product.create(productData);
  return product;
}
```

### 2. æ–‡ä»¶å¤¹ä¸Šä¼ ä¸é‡å‘½å

#### åç«¯å®ç° (productController.js)

```javascript
/**
 * ä¸Šä¼ äº§å“è¯¦æƒ…é¡µæ–‡ä»¶å¤¹
 * è‡ªåŠ¨é‡å‘½åä¸ºäº§å“ID
 */
async uploadProductFiles(productId, files, relativePaths, baseRoot) {
  const Product = require('../models/product');
  
  // 1. è·å–äº§å“ä¿¡æ¯
  const product = await Product.findByPk(productId);
  if (!product) {
    throw new Error('äº§å“ä¸å­˜åœ¨');
  }
  
  // 2. ä½¿ç”¨äº§å“modelä½œä¸ºæ–‡ä»¶å¤¹å (RD-001)
  const targetFolderName = product.model;
  const targetPath = path.join(__dirname, '../../public/products', targetFolderName);
  
  // 3. æ¸…ç©ºæ—§æ–‡ä»¶å¤¹(å¦‚æœå­˜åœ¨)
  await fs.emptyDir(targetPath);
  
  // 4. ä¿å­˜æ‰€æœ‰æ–‡ä»¶,ä¿æŒç›®å½•ç»“æ„
  for (let i = 0; i < files.length; i++) {
    const file = files[i];
    const relativePath = relativePaths[i];
    
    // ç§»é™¤åŸå§‹æ ¹ç›®å½•,æ›¿æ¢ä¸ºæ–°çš„äº§å“ID
    const pathParts = relativePath.split('/');
    const rootLen = baseRoot.split('/').length;
    const newRelativePath = pathParts.slice(rootLen).join('/');
    
    const targetFilePath = path.join(targetPath, newRelativePath);
    
    // ç¡®ä¿ç›®å½•å­˜åœ¨
    await fs.ensureDir(path.dirname(targetFilePath));
    
    // å†™å…¥æ–‡ä»¶
    await fs.writeFile(targetFilePath, file.buffer);
  }
  
  // 5. æ›´æ–°äº§å“çš„filePathå­—æ®µ
  await product.update({
    filePath: `products/${targetFolderName}`
  });
  
  return {
    filePath: `products/${targetFolderName}`,
    fileCount: files.length
  };
}
```

### 3. æ•°æ®åº“æ¨¡å‹æ‰©å±•

#### Productæ¨¡å‹å­—æ®µ (product.js)

```javascript
const Product = sequelize.define('Product', {
  id: {
    type: DataTypes.INTEGER,
    primaryKey: true,
    autoIncrement: true
  },
  name: {
    type: DataTypes.STRING,
    allowNull: false,
    comment: 'äº§å“åç§°'
  },
  model: {
    type: DataTypes.STRING,
    unique: true,
    allowNull: false,
    comment: 'äº§å“å‹å·/ID (å¦‚ RD-001)'
  },
  cardImage: {
    type: DataTypes.STRING,
    comment: 'äº§å“å¡ç‰‡ä¸»å›¾'
  },
  price: {
    type: DataTypes.DECIMAL(10, 2),
    comment: 'äº§å“ä»·æ ¼'
  },
  tag: {
    type: DataTypes.STRING,
    comment: 'äº§å“æ ‡ç­¾ (çƒ­é”€/æ–°å“/ç‰¹ä»·/æ¨è)'
  },
  features: {
    type: DataTypes.JSON,
    comment: 'äº§å“ç‰¹æ€§åˆ—è¡¨ [{icon, text}]'
  },
  sales: {
    type: DataTypes.INTEGER,
    defaultValue: 0,
    comment: 'é”€å”®æ•°é‡'
  },
  categoryId: {
    type: DataTypes.INTEGER,
    comment: 'æ‰€å±åˆ†ç±»ID'
  },
  promoPosition: {
    type: DataTypes.ENUM('none', 'homepage_banner', 'category_top', 'homepage_recommend'),
    defaultValue: 'none',
    comment: 'æ¨å¹¿ä½ç½®'
  },
  status: {
    type: DataTypes.ENUM('active', 'inactive', 'draft'),
    defaultValue: 'draft',
    comment: 'äº§å“çŠ¶æ€'
  },
  filePath: {
    type: DataTypes.STRING,
    comment: 'è¯¦æƒ…é¡µæ–‡ä»¶è·¯å¾„ (å¦‚ products/RD-001)'
  },
  sortOrder: {
    type: DataTypes.INTEGER,
    defaultValue: 0,
    comment: 'æ’åºæƒé‡'
  }
});
```

### 4. å‰ç«¯APIæ¥å£è°ƒç”¨

#### åˆ›å»ºäº§å“æµç¨‹ (ProductWizard.vue)

```javascript
// æäº¤äº§å“åˆ›å»º
async function handleSubmit() {
  // 1. åˆ›å»ºäº§å“(ä¸ä¼ model,åç«¯è‡ªåŠ¨ç”Ÿæˆ)
  const createPayload = {
    name: cardForm.name,
    // model: ä¸ä¼ ,åç«¯è‡ªåŠ¨ç”Ÿæˆ RD-001
    price: cardForm.price,
    cardImage: cardForm.cardImage,
    tag: cardForm.tag,
    features: cardForm.features,
    sales: cardForm.sales,
    categoryId: configForm.categoryId,
    promoPosition: configForm.promoPosition,
    status: configForm.status,
    sortOrder: configForm.sortOrder
  };
  
  const createRes = await request.post({ 
    url: '/products', 
    data: createPayload 
  });
  
  const product = createRes.data;
  const productId = product.id;
  const productModel = product.model; // åç«¯è¿”å›çš„ RD-001
  
  // 2. ä¸Šä¼ æ–‡ä»¶å¤¹
  if (folderFiles.value.length > 0) {
    const formData = new FormData();
    for (const f of folderFiles.value) {
      formData.append('files', f.file);
      formData.append('relativePaths[]', f.relativePath);
    }
    
    await request.request({
      url: `/products/${productId}/files`,
      method: 'POST',
      data: formData
    });
  }
  
  ElMessage.success(`äº§å“åˆ›å»ºæˆåŠŸ! ID: ${productModel}`);
}
```

### 5. å‰ç«¯å±•ç¤ºåŒæ­¥

#### äº§å“åˆ—è¡¨API (å‰ç«¯ç½‘ç«™)

```javascript
// è·å–äº§å“åˆ—è¡¨
async function loadProducts(categoryId = null, promoPosition = null) {
  const params = {
    status: 'active', // åªæ˜¾ç¤ºå·²å‘å¸ƒçš„äº§å“
    page: 1,
    limit: 20
  };
  
  if (categoryId) {
    params.categoryId = categoryId;
  }
  
  if (promoPosition) {
    params.promoPosition = promoPosition;
  }
  
  const response = await fetch(`/api/products?${new URLSearchParams(params)}`);
  const data = await response.json();
  
  return data.data.items;
}

// æ¸²æŸ“äº§å“å¡ç‰‡
function renderProductCard(product) {
  return `
    <a class="product-card-link" href="/products/${product.model}/äº§å“è¯¦æƒ….html">
      <div class="product-card" data-id="${product.id}">
        <div class="product-tag">${product.tag || ''}</div>
        <div class="product-image">
          <img src="${product.cardImage}" alt="${product.name}">
        </div>
        <div class="product-content">
          <h3 class="product-name">${product.name}</h3>
          <ul class="product-features">
            ${product.features.map(f => `
              <li><i class="${f.icon}"></i><span>${f.text}</span></li>
            `).join('')}
          </ul>
          <div class="product-details-footer">
            <div class="product-price-container">
              <span class="product-price">${product.price}</span>
              <span class="product-sales">å·²å”® ${product.sales}</span>
            </div>
            <button class="btn-details">æŸ¥çœ‹è¯¦æƒ…</button>
          </div>
        </div>
      </div>
    </a>
  `;
}
```

#### å¤šä½ç½®å±•ç¤ºé…ç½®

```javascript
// 1. é¦–é¡µBannerä½
const bannerProducts = await loadProducts(null, 'homepage_banner');

// 2. åˆ†ç±»é¡µç½®é¡¶
const categoryTopProducts = await loadProducts(categoryId, 'category_top');

// 3. é¦–é¡µæ¨è
const recommendProducts = await loadProducts(null, 'homepage_recommend');

// 4. æ ¸å¿ƒäº§å“åŒºåŸŸ
const coreProducts = await loadProducts(null, 'homepage_recommend');
```

---

## ğŸ“ ä½¿ç”¨æµç¨‹

### ç®¡ç†å‘˜æ“ä½œæµç¨‹

#### æ­¥éª¤1: åˆ¶ä½œäº§å“å¡ç‰‡

1. ç‚¹å‡»"æ–°å¢äº§å“"æŒ‰é’®
2. å¡«å†™äº§å“ä¿¡æ¯:
   - äº§å“åç§°: `æ˜Ÿç«Pro æ™ºèƒ½ç‡ƒæ°”ç¶`
   - äº§å“å‹å·: **ç•™ç©º**(ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ RD-001)
   - äº§å“ä»·æ ¼: `2499.00`
   - ä¸Šä¼ å¡ç‰‡ä¸»å›¾
   - é€‰æ‹©äº§å“æ ‡ç­¾: `çƒ­é”€`
   - æ·»åŠ äº§å“ç‰¹æ€§: `è“ç„°æŠ€æœ¯`ã€`å¤šé‡å®‰å…¨`ã€`èŠ‚èƒ½ç¯ä¿`
   - è®¾ç½®é”€å”®æ•°é‡: `1580`
3. å®æ—¶é¢„è§ˆäº§å“å¡ç‰‡æ•ˆæœ
4. ç‚¹å‡»"ä¸‹ä¸€æ­¥"

#### æ­¥éª¤2: ä¸Šä¼ è¯¦æƒ…é¡µæ–‡ä»¶

1. å‡†å¤‡äº§å“è¯¦æƒ…é¡µæ–‡ä»¶å¤¹,ç»“æ„å¦‚ä¸‹:
   ```
   RD-001/  (æ–‡ä»¶å¤¹åå¯ä»¥ä»»æ„,ä¼šè¢«è‡ªåŠ¨é‡å‘½å)
   â”œâ”€â”€ äº§å“è¯¦æƒ….html
   â”œâ”€â”€ å›¾ç‰‡/
   â”‚   â”œâ”€â”€ äº§å“å›¾1.jpg
   â”‚   â””â”€â”€ äº§å“å›¾2.jpg
   â””â”€â”€ æ ·å¼é€»è¾‘/
       â”œâ”€â”€ äº§å“è¯¦æƒ….css
       â”œâ”€â”€ äº§å“è¯¦æƒ….js
       â”œâ”€â”€ æ‰¹é‡æ·»åŠ å¯ç¼–è¾‘æ ‡è®°.js
       â””â”€â”€ è‡ªåŠ¨å¯ç¼–è¾‘.js
   ```

2. æ‹–æ‹½æ•´ä¸ªæ–‡ä»¶å¤¹åˆ°ä¸Šä¼ åŒºåŸŸ,æˆ–ç‚¹å‡»"ä»æ–‡ä»¶å¤¹é€‰æ‹©"
3. ç³»ç»Ÿè‡ªåŠ¨æ ¡éªŒæ–‡ä»¶å¤¹ç»“æ„:
   - âœ… æ ¹ç›®å½• HTML æ–‡ä»¶ (1ä¸ª)
   - âœ… æ ·å¼é€»è¾‘/ å†… CSS (1ä¸ª)
   - âœ… æ ·å¼é€»è¾‘/ å†… JS (1ä¸ª)
   - âœ… å›¾ç‰‡/ å­æ–‡ä»¶å¤¹
4. æ ¡éªŒé€šè¿‡åç‚¹å‡»"ä¸‹ä¸€æ­¥"

#### æ­¥éª¤3: é…ç½®äº§å“ä¿¡æ¯

1. é€‰æ‹©äº§å“åˆ†ç±»: `ç‡ƒæ°”ç¶ç³»åˆ—`
2. é€‰æ‹©æ¨å¹¿ä½ç½®:
   - `é¦–é¡µBannerä½` - æ˜¾ç¤ºåœ¨é¦–é¡µè½®æ’­å›¾
   - `åˆ†ç±»é¡µç½®é¡¶` - æ˜¾ç¤ºåœ¨åˆ†ç±»é¡µé¡¶éƒ¨
   - `é¦–é¡µæ¨è` - æ˜¾ç¤ºåœ¨é¦–é¡µæ¨èåŒºåŸŸ
   - `ä¸å‚ä¸æ¨å¹¿` - ä»…åœ¨äº§å“åˆ—è¡¨æ˜¾ç¤º
3. é€‰æ‹©äº§å“çŠ¶æ€:
   - `è‰ç¨¿` - æš‚ä¸å‘å¸ƒ
   - `ç«‹å³å‘å¸ƒ` - ç«‹å³åœ¨å‰ç«¯æ˜¾ç¤º
4. è®¾ç½®æ’åºæƒé‡(è‡ªåŠ¨å¡«å……)
5. ç‚¹å‡»"åˆ›å»ºäº§å“"

### ç³»ç»Ÿè‡ªåŠ¨å¤„ç†

1. **ç”Ÿæˆäº§å“ID**: `RD-001`
2. **åˆ›å»ºæ•°æ®åº“è®°å½•**: ä¿å­˜æ‰€æœ‰äº§å“ä¿¡æ¯
3. **ä¸Šä¼ å¹¶é‡å‘½åæ–‡ä»¶å¤¹**: 
   - åŸæ–‡ä»¶å¤¹å: `RD-001` æˆ–ä»»æ„åç§°
   - æ–°æ–‡ä»¶å¤¹å: `RD-001` (ä½¿ç”¨ç”Ÿæˆçš„äº§å“ID)
   - ä¿å­˜è·¯å¾„: `public/products/RD-001/`
4. **æ›´æ–°filePath**: `products/RD-001`
5. **å‰ç«¯è‡ªåŠ¨åŒæ­¥**: äº§å“ç«‹å³æ˜¾ç¤ºåœ¨å¯¹åº”ä½ç½®

---

## ğŸ¯ å‰ç«¯å±•ç¤ºä½ç½®

### 1. åå°ç®¡ç†ç³»ç»Ÿ

**ä½ç½®**: äº§å“ç®¡ç† â†’ äº§å“åˆ—è¡¨

**æ˜¾ç¤ºå†…å®¹**:
- äº§å“å¡ç‰‡é¢„è§ˆ
- äº§å“ID (RD-001)
- äº§å“åç§°ã€ä»·æ ¼ã€åˆ†ç±»
- çŠ¶æ€ã€æ¨å¹¿ä½ç½®
- æ“ä½œæŒ‰é’®(ç¼–è¾‘/åˆ é™¤/é¢„è§ˆ)

### 2. å‰ç«¯äº§å“åˆ—è¡¨é¡µ

**ä½ç½®**: `/products` æˆ– åˆ†ç±»é¡µ

**æ˜¾ç¤ºå†…å®¹**:
- äº§å“å¡ç‰‡ç½‘æ ¼
- ç‚¹å‡»è·³è½¬åˆ°è¯¦æƒ…é¡µ: `/products/RD-001/äº§å“è¯¦æƒ….html`

**ä»£ç ç¤ºä¾‹**:
```html
<div class="products-grid" id="products-grid">
  <!-- åŠ¨æ€åŠ è½½äº§å“å¡ç‰‡ -->
</div>

<script>
// åŠ è½½äº§å“åˆ—è¡¨
async function loadProductList() {
  const response = await fetch('/api/products?status=active');
  const data = await response.json();
  const products = data.data.items;
  
  const grid = document.getElementById('products-grid');
  grid.innerHTML = products.map(product => renderProductCard(product)).join('');
}
</script>
```

### 3. åˆ†ç±»å±•ç¤ºåŒºåŸŸ

**ä½ç½®**: é¦–é¡µ â†’ äº§å“åˆ†ç±»

**æ˜¾ç¤ºå†…å®¹**:
- åˆ†ç±»å¡ç‰‡
- åˆ†ç±»ä¸‹çš„äº§å“æ•°é‡
- ç‚¹å‡»æŸ¥çœ‹è¯¥åˆ†ç±»çš„æ‰€æœ‰äº§å“

**ä»£ç ç¤ºä¾‹**:
```html
<div class="categories-container">
  <!-- åŠ¨æ€åŠ è½½åˆ†ç±»å¡ç‰‡ -->
</div>

<script>
// åŠ è½½åˆ†ç±»åˆ—è¡¨
async function loadCategories() {
  const response = await fetch('/api/product-categories?includeProducts=true');
  const data = await response.json();
  const categories = data.data;
  
  // æ¸²æŸ“åˆ†ç±»å¡ç‰‡
  categories.forEach(category => {
    renderCategoryCard(category);
  });
}
</script>
```

### 4. é¦–é¡µæ¨èä½

**ä½ç½®**: é¦–é¡µ â†’ æ ¸å¿ƒäº§å“ç³»åˆ—

**æ˜¾ç¤ºå†…å®¹**:
- æ¨å¹¿ä½ç½®ä¸º `homepage_recommend` çš„äº§å“
- å¤§å›¾å±•ç¤º
- äº§å“ç‰¹æ€§

**ä»£ç ç¤ºä¾‹**:
```html
<section class="core-products-section" id="core-products">
  <div class="products-showcase">
    <!-- åŠ¨æ€åŠ è½½æ¨èäº§å“ -->
  </div>
</section>

<script>
// åŠ è½½æ¨èäº§å“
async function loadRecommendProducts() {
  const response = await fetch('/api/products?promoPosition=homepage_recommend&status=active');
  const data = await response.json();
  const products = data.data.items;
  
  // æ¸²æŸ“æ¨èäº§å“
  products.forEach(product => {
    renderRecommendCard(product);
  });
}
</script>
```

---

## ğŸ”„ åˆ†ç±»åŠ¨æ€ç®¡ç†

### åå°è°ƒæ•´åˆ†ç±»

1. åœ¨äº§å“åˆ—è¡¨ä¸­é€‰æ‹©äº§å“
2. ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®
3. åœ¨ç¬¬ä¸‰æ­¥"é…ç½®äº§å“ä¿¡æ¯"ä¸­ä¿®æ”¹åˆ†ç±»
4. ä¿å­˜åè‡ªåŠ¨åŒæ­¥åˆ°å‰ç«¯

### å‰ç«¯è‡ªåŠ¨åŒæ­¥

```javascript
// ç›‘å¬åˆ†ç±»å˜åŒ–
watch(() => configForm.categoryId, async (newCategoryId) => {
  // æ›´æ–°äº§å“åˆ†ç±»
  await updateProductCategory(productId, newCategoryId);
  
  // åˆ·æ–°å‰ç«¯ç¼“å­˜
  await refreshFrontendCache();
});

// åˆ·æ–°å‰ç«¯ç¼“å­˜
async function refreshFrontendCache() {
  // é‡æ–°åŠ è½½äº§å“åˆ—è¡¨
  await loadProductList();
  
  // é‡æ–°åŠ è½½åˆ†ç±»åˆ—è¡¨
  await loadCategories();
  
  // æ›´æ–°æ¨èäº§å“
  await loadRecommendProducts();
}
```

---

## ğŸ“‚ æ–‡ä»¶ç»“æ„ç¤ºä¾‹

### åç«¯æ–‡ä»¶ç»“æ„

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ productController.js      # äº§å“æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ productService.js         # äº§å“æœåŠ¡(åŒ…å«IDç”Ÿæˆ)
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ product.js                # äº§å“æ¨¡å‹
â”‚   â””â”€â”€ routes/
â”‚       â””â”€â”€ products.js               # äº§å“è·¯ç”±
â””â”€â”€ public/
    â””â”€â”€ products/                     # äº§å“è¯¦æƒ…é¡µæ–‡ä»¶å¤¹
        â”œâ”€â”€ RD-001/                   # äº§å“IDä½œä¸ºæ–‡ä»¶å¤¹å
        â”‚   â”œâ”€â”€ äº§å“è¯¦æƒ….html
        â”‚   â”œâ”€â”€ å›¾ç‰‡/
        â”‚   â””â”€â”€ æ ·å¼é€»è¾‘/
        â”œâ”€â”€ RD-002/
        â””â”€â”€ RD-003/
```

### å‰ç«¯æ–‡ä»¶ç»“æ„

```
web Site/
â”œâ”€â”€ web PC/
â”‚   â”œâ”€â”€ index.html                    # é¦–é¡µ
â”‚   â”œâ”€â”€ products.html                 # äº§å“åˆ—è¡¨é¡µ
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ product-loader.js         # äº§å“åŠ è½½å™¨
â”‚       â””â”€â”€ category-loader.js        # åˆ†ç±»åŠ è½½å™¨
â””â”€â”€ products/                         # äº§å“è¯¦æƒ…é¡µ(ç¬¦å·é“¾æ¥åˆ°backend/public/products)
    â”œâ”€â”€ RD-001/
    â”œâ”€â”€ RD-002/
    â””â”€â”€ RD-003/
```

---

## âœ… å®ç°æ£€æŸ¥æ¸…å•

### åç«¯å®ç°

- [x] äº§å“IDè‡ªåŠ¨ç”Ÿæˆå‡½æ•° (`generateProductId`)
- [x] æ–‡ä»¶å¤¹ä¸Šä¼ æ¥å£ (`POST /api/products/:id/files`)
- [x] æ–‡ä»¶å¤¹é‡å‘½åé€»è¾‘ (ä½¿ç”¨äº§å“model)
- [x] filePathå­—æ®µæ›´æ–°
- [ ] äº§å“åˆ›å»ºæ—¶è‡ªåŠ¨ç”ŸæˆID (éœ€ä¿®æ”¹ `createProduct`)
- [ ] äº§å“åˆ é™¤æ—¶æ¸…ç†æ–‡ä»¶å¤¹

### å‰ç«¯ç®¡ç†ç³»ç»Ÿ

- [x] ä¸‰æ­¥å‘å¯¼åŸºç¡€åŠŸèƒ½
- [x] æ–‡ä»¶å¤¹ä¸Šä¼ ç»„ä»¶
- [x] æ–‡ä»¶å¤¹ç»“æ„æ ¡éªŒ
- [ ] äº§å“å‹å·å­—æ®µæ”¹ä¸ºåªè¯»(æ˜¾ç¤ºè‡ªåŠ¨ç”Ÿæˆçš„ID)
- [ ] æ˜¾ç¤ºäº§å“è¯¦æƒ…é¡µé¢„è§ˆé“¾æ¥

### å‰ç«¯ç½‘ç«™

- [ ] äº§å“åˆ—è¡¨åŠ¨æ€åŠ è½½
- [ ] åˆ†ç±»é¡µåŠ¨æ€åŠ è½½
- [ ] é¦–é¡µæ¨èä½åŠ¨æ€åŠ è½½
- [ ] äº§å“è¯¦æƒ…é¡µé“¾æ¥ç”Ÿæˆ
- [ ] åˆ†ç±»åˆ‡æ¢è‡ªåŠ¨åˆ·æ–°

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ä¼˜å…ˆçº§1: æ ¸å¿ƒåŠŸèƒ½å®Œå–„

1. **ä¿®æ”¹åç«¯äº§å“åˆ›å»ºé€»è¾‘**
   - æ–‡ä»¶: `backend/src/services/productService.js`
   - æ·»åŠ : `generateProductId()` å‡½æ•°
   - ä¿®æ”¹: `createProduct()` è‡ªåŠ¨ç”Ÿæˆmodel

2. **ä¿®æ”¹å‰ç«¯å‘å¯¼ç»„ä»¶**
   - æ–‡ä»¶: `admin/src/views/product/list/components/ProductWizard.vue`
   - ä¿®æ”¹: äº§å“å‹å·å­—æ®µæ”¹ä¸ºåªè¯»
   - æ·»åŠ : æ˜¾ç¤ºç”Ÿæˆçš„äº§å“ID

### ä¼˜å…ˆçº§2: å‰ç«¯åŒæ­¥

3. **åˆ›å»ºäº§å“åŠ è½½å™¨**
   - æ–‡ä»¶: `web Site/web PC/js/product-loader.js`
   - åŠŸèƒ½: ä»APIåŠ è½½äº§å“å¹¶æ¸²æŸ“

4. **æ›´æ–°é¦–é¡µå’Œäº§å“åˆ—è¡¨é¡µ**
   - æ–‡ä»¶: `web Site/web PC/index.html`
   - æ–‡ä»¶: `web Site/web PC/products.html`
   - åŠŸèƒ½: ä½¿ç”¨äº§å“åŠ è½½å™¨åŠ¨æ€åŠ è½½

### ä¼˜å…ˆçº§3: ä¼˜åŒ–ä½“éªŒ

5. **æ·»åŠ äº§å“é¢„è§ˆåŠŸèƒ½**
   - åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­æ·»åŠ "é¢„è§ˆè¯¦æƒ…é¡µ"æŒ‰é’®
   - ç›´æ¥æ‰“å¼€ `/products/RD-001/äº§å“è¯¦æƒ….html`

6. **æ·»åŠ æ–‡ä»¶å¤¹æ¸…ç†åŠŸèƒ½**
   - åˆ é™¤äº§å“æ—¶è‡ªåŠ¨åˆ é™¤å¯¹åº”æ–‡ä»¶å¤¹
   - é¿å…åƒåœ¾æ–‡ä»¶ç´¯ç§¯

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜,è¯·æŸ¥çœ‹:
- åç«¯æ—¥å¿—: `backend/logs/app.log`
- å‰ç«¯æ§åˆ¶å°: æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- APIæ–‡æ¡£: `http://localhost:3001/api-docs`

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-11-28  
**ä½œè€…**: Cascade AI
