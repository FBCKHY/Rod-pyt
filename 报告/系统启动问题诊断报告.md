# ğŸ” ç³»ç»Ÿå¯åŠ¨é—®é¢˜è¯Šæ–­æŠ¥å‘Š

**æ—¶é—´**: 2025-11-21 15:02  
**çŠ¶æ€**: é—®é¢˜å·²è¯†åˆ«

---

## âŒ æ ¸å¿ƒé—®é¢˜

### 1. **MySQL æ•°æ®åº“æœªè¿è¡Œ** (æœ€ä¸¥é‡)
- **é”™è¯¯**: `SequelizeConnectionRefusedError: ECONNREFUSED`
- **åŸå› **: MySQL æœåŠ¡æœªå¯åŠ¨æˆ–æœªå®‰è£…
- **å½±å“**: åç«¯æ— æ³•å¯åŠ¨ï¼Œæ‰€æœ‰ API è¯·æ±‚å¤±è´¥

### 2. **ç«¯å£é…ç½®ä¸åŒ¹é…** (å·²ä¿®å¤)
- **é—®é¢˜**: å‰ç«¯é…ç½® 3001 ç«¯å£ï¼Œåç«¯é»˜è®¤ 3000 ç«¯å£
- **çŠ¶æ€**: âœ… å·²åˆ›å»º `.env` æ–‡ä»¶å¹¶ä¿®æ”¹ä¸º 3001

### 3. **Font Awesome CDN è¢«é˜»æ­¢** (æ¬¡è¦)
- **é”™è¯¯**: `Tracking Prevention blocked access to storage`
- **åŸå› **: æµè§ˆå™¨è·Ÿè¸ªä¿æŠ¤åŠŸèƒ½
- **å½±å“**: å›¾æ ‡å¯èƒ½æ— æ³•æ˜¾ç¤º

---

## ğŸ¯ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ A: å¯åŠ¨ MySQL æœåŠ¡ï¼ˆæ¨èï¼‰

#### æ­¥éª¤ 1: æ£€æŸ¥ MySQL æ˜¯å¦å·²å®‰è£…

```powershell
# æŸ¥æ‰¾ MySQL æœåŠ¡
Get-Service | Where-Object {$_.DisplayName -like '*mysql*'}

# æŸ¥æ‰¾ MySQL è¿›ç¨‹
Get-Process | Where-Object {$_.ProcessName -like '*mysql*'}
```

#### æ­¥éª¤ 2: å¯åŠ¨ MySQL

**å¦‚æœå·²å®‰è£… MySQL**:
```powershell
# å¯åŠ¨ MySQL æœåŠ¡
net start MySQL80
# æˆ–
net start MySQL
```

**å¦‚æœæœªå®‰è£… MySQL**:
1. ä¸‹è½½ MySQL 8.0: https://dev.mysql.com/downloads/mysql/
2. å®‰è£…å¹¶é…ç½®
3. åˆ›å»ºæ•°æ®åº“: `subscription_system`

#### æ­¥éª¤ 3: åˆå§‹åŒ–æ•°æ®åº“

```bash
cd backend

# è¿è¡Œæ•°æ®åº“è¿ç§»
npm run db:migrate

# æ·»åŠ æµ‹è¯•æ•°æ®
npm run db:seed
```

#### æ­¥éª¤ 4: å¯åŠ¨åç«¯

```bash
cd backend
npm run dev
```

---

### æ–¹æ¡ˆ B: ä½¿ç”¨ SQLiteï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰

å¦‚æœæ— æ³•å¿«é€Ÿå¯åŠ¨ MySQLï¼Œå¯ä»¥ä¸´æ—¶åˆ‡æ¢åˆ° SQLiteï¼š

#### ä¿®æ”¹æ•°æ®åº“é…ç½®

**æ–‡ä»¶**: `backend/src/config/database.js`

```javascript
const sequelize = new Sequelize({
  dialect: 'sqlite',
  storage: './database.sqlite',
  logging: process.env.NODE_ENV === 'development' ? console.log : false,
  // ... å…¶ä»–é…ç½®ä¿æŒä¸å˜
});
```

#### å®‰è£… SQLite ä¾èµ–

```bash
cd backend
npm install sqlite3
```

---

## ğŸ“‹ å®Œæ•´å¯åŠ¨æ£€æŸ¥æ¸…å•

### å‰ç½®æ¡ä»¶
- [ ] Node.js 18.20.4+ å·²å®‰è£…
- [ ] MySQL 8.0+ å·²å®‰è£…å¹¶è¿è¡Œ
- [ ] åç«¯ä¾èµ–å·²å®‰è£… (`npm install`)
- [ ] å‰ç«¯ä¾èµ–å·²å®‰è£… (`npm install`)

### æ•°æ®åº“æ£€æŸ¥
- [ ] MySQL æœåŠ¡æ­£åœ¨è¿è¡Œ
- [ ] æ•°æ®åº“ `subscription_system` å·²åˆ›å»º
- [ ] æ•°æ®åº“è¿ç§»å·²å®Œæˆ
- [ ] æµ‹è¯•æ•°æ®å·²æ·»åŠ 

### é…ç½®æ£€æŸ¥
- [ ] `backend/.env` æ–‡ä»¶å­˜åœ¨
- [ ] ç«¯å£é…ç½®ä¸º 3001
- [ ] æ•°æ®åº“è¿æ¥ä¿¡æ¯æ­£ç¡®
- [ ] `admin/.env.development` API åœ°å€ä¸º 3001

### æœåŠ¡å¯åŠ¨
- [ ] åç«¯å¯åŠ¨æˆåŠŸ (localhost:3001)
- [ ] å‰ç«¯å¯åŠ¨æˆåŠŸ (localhost:3006)
- [ ] æµè§ˆå™¨èƒ½è®¿é—®é¡µé¢
- [ ] API è¯·æ±‚æ­£å¸¸

---

## ğŸ”§ å¿«é€Ÿä¿®å¤å‘½ä»¤

### ä¸€é”®æ£€æŸ¥è„šæœ¬

```powershell
# ä¿å­˜ä¸º check-system.ps1

Write-Host "=== ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥ ===" -ForegroundColor Cyan

# æ£€æŸ¥ Node.js
Write-Host "`n1. æ£€æŸ¥ Node.js..." -ForegroundColor Yellow
node --version

# æ£€æŸ¥ MySQL
Write-Host "`n2. æ£€æŸ¥ MySQL æœåŠ¡..." -ForegroundColor Yellow
Get-Service | Where-Object {$_.DisplayName -like '*mysql*'}

# æ£€æŸ¥ç«¯å£å ç”¨
Write-Host "`n3. æ£€æŸ¥ç«¯å£å ç”¨..." -ForegroundColor Yellow
Write-Host "3001ç«¯å£:" -NoNewline
netstat -ano | findstr :3001
Write-Host "3006ç«¯å£:" -NoNewline
netstat -ano | findstr :3006
Write-Host "3306ç«¯å£:" -NoNewline
netstat -ano | findstr :3306

# æ£€æŸ¥é…ç½®æ–‡ä»¶
Write-Host "`n4. æ£€æŸ¥é…ç½®æ–‡ä»¶..." -ForegroundColor Yellow
if (Test-Path "backend\.env") {
    Write-Host "âœ… backend\.env å­˜åœ¨" -ForegroundColor Green
} else {
    Write-Host "âŒ backend\.env ä¸å­˜åœ¨" -ForegroundColor Red
}

if (Test-Path "admin\.env.development") {
    Write-Host "âœ… admin\.env.development å­˜åœ¨" -ForegroundColor Green
} else {
    Write-Host "âŒ admin\.env.development ä¸å­˜åœ¨" -ForegroundColor Red
}

Write-Host "`n=== æ£€æŸ¥å®Œæˆ ===" -ForegroundColor Cyan
```

---

## ğŸš¨ å½“å‰é”™è¯¯è¯¦æƒ…

### æ§åˆ¶å°é”™è¯¯åˆ†æ

```
1. ERR_CONNECTION_REFUSED (localhost:3001)
   â†’ åç«¯æœåŠ¡æœªå¯åŠ¨
   â†’ åŸå› : æ•°æ®åº“è¿æ¥å¤±è´¥

2. SequelizeConnectionRefusedError
   â†’ MySQL æ•°æ®åº“æœªè¿è¡Œ
   â†’ éœ€è¦å¯åŠ¨ MySQL æœåŠ¡

3. Tracking Prevention blocked
   â†’ æµè§ˆå™¨å®‰å…¨ç­–ç•¥
   â†’ å¯ä»¥å¿½ç•¥æˆ–ç¦ç”¨è·Ÿè¸ªä¿æŠ¤

4. Chrome Extension errors
   â†’ æµè§ˆå™¨æ‰©å±•å†²çª
   â†’ å¯ä»¥å¿½ç•¥
```

---

## ğŸ“Š é—®é¢˜ä¼˜å…ˆçº§

### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆå¿…é¡»è§£å†³ï¼‰
1. **å¯åŠ¨ MySQL æ•°æ®åº“** - ç³»ç»Ÿæ— æ³•è¿è¡Œ
2. **åˆå§‹åŒ–æ•°æ®åº“è¡¨** - åç«¯éœ€è¦è¡¨ç»“æ„
3. **å¯åŠ¨åç«¯æœåŠ¡** - API æ¥å£ä¾èµ–

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆå»ºè®®è§£å†³ï¼‰
1. Font Awesome CDN é—®é¢˜ - å½±å“å›¾æ ‡æ˜¾ç¤º
2. æµè§ˆå™¨æ‰©å±•å†²çª - å½±å“å¼€å‘ä½“éªŒ

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰
1. ä¼˜åŒ–å¯åŠ¨è„šæœ¬
2. æ·»åŠ å¥åº·æ£€æŸ¥
3. å®Œå–„é”™è¯¯æç¤º

---

## ğŸ’¡ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³æ‰§è¡Œï¼ˆ5åˆ†é’Ÿå†…ï¼‰

1. **ç¡®è®¤ MySQL çŠ¶æ€**
   ```powershell
   Get-Service | Where-Object {$_.Name -like '*mysql*'}
   ```

2. **å¯åŠ¨ MySQL**ï¼ˆå¦‚æœå·²å®‰è£…ï¼‰
   ```powershell
   net start MySQL80
   ```

3. **åˆå§‹åŒ–æ•°æ®åº“**
   ```bash
   cd backend
   npm run db:migrate
   npm run db:seed
   ```

4. **å¯åŠ¨åç«¯**
   ```bash
   npm run dev
   ```

5. **éªŒè¯æœåŠ¡**
   ```bash
   curl http://localhost:3001/health
   ```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

### å¦‚æœ MySQL æœªå®‰è£…
- é€‰æ‹©æ–¹æ¡ˆ Bï¼ˆä½¿ç”¨ SQLiteï¼‰
- æˆ–ä¸‹è½½å®‰è£… MySQL 8.0

### å¦‚æœæ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®
- ç¡®è®¤æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç 
- ç¡®è®¤æ•°æ®åº“ `subscription_system` å·²åˆ›å»º

### å¦‚æœåç«¯ä»æ— æ³•å¯åŠ¨
- æŸ¥çœ‹åç«¯æ§åˆ¶å°çš„å®Œæ•´é”™è¯¯ä¿¡æ¯
- æ£€æŸ¥ `backend/logs/app.log` æ—¥å¿—æ–‡ä»¶
- ç¡®è®¤æ‰€æœ‰ä¾èµ–å·²æ­£ç¡®å®‰è£…

---

## âœ… æˆåŠŸæ ‡å¿—

å½“ä½ çœ‹åˆ°ä»¥ä¸‹å†…å®¹æ—¶ï¼Œè¯´æ˜é—®é¢˜å·²è§£å†³ï¼š

```
âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ
âœ… ğŸš€ æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3001
âœ… å‰ç«¯é¡µé¢èƒ½æ­£å¸¸åŠ è½½
âœ… äº§å“åˆ—è¡¨èƒ½æ˜¾ç¤ºæ•°æ®
```

---

**å‡†å¤‡å¥½è§£å†³é—®é¢˜äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹å§ï¼** ğŸš€
